# E10. 배열 검색 기능구현 Mybatis foreach 사용

## BoardSearchParameter에 boardTypes 변수 지정

```java
package kr.co.jisung.mvc.parameter;

import java.util.List;

import kr.co.jisung.mvc.domain.Board;
import kr.co.jisung.mvc.domain.BoardType;
import lombok.Data;

/**
 * 게시물검색
 * @author jisun
 *
 */
@Data
public class BoardSearchParameter {
	private String keyword;
	private List<BoardType> boardTypes;
	public BoardSearchParameter() {
		
	}
}

```

## Board.xml에 조건 추가

```xml
		<select id="getList" parameterType="kr.co.jisung.mvc.parameter.BoardSearchParameter" resultType="kr.co.jisung.mvc.domain.Board">
		SELECT
			B.BOARD_SEQ,
			B.TITLE,
			B.CONTENTS,
			B.REG_DATE
		FROM T_BOARD B
		<!--Mybatis에서 제공하는 where문법  -->
		<where>
		<!-- @를 사용하면 java static method 접근 가능 -->
		<!-- @패키지 + 클래스명@메소드명(파라메터 변수명)  -->
		<!-- null과 공백문자이면 false 나머지 true-->
		<!-- 컨텐츠가 리턴되면 단순히 “WHERE”만을 추가한다. 게다가 컨텐츠가 “AND”나 “OR”로 시작한다면 그 “AND”나 “OR”를 지워버린다 -->
			<if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(keyword)">
				AND B.TITLE LIKE CONCAT ('%' , #{keyword} , '%')
			</if>
			<!-- null 체크 , 배열의 길이 체크 -->
			<!-- WHERE 일치하길 원하는 칼럼명 IN ( 조건1 ,조건2...) -->
			<!-- separator : 반복 되는 사이에 출력할 문자열 -->
			<if test="@org.apache.commons.lang3.ObjectUtils@isNotEmpty(boardTypes)">
				AND B.BOARD_TYPE IN (
					<foreach collection="boardTypes" item="value" separator=",">
						#{value}
					</foreach>
				)
			</if>
		</where>
		ORDER BY B.REG_DATE DESC
	</select>
```

