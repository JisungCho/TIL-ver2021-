# E08. enum class 활용 : Parameter , Domain 클래스 내부 변수에 사용하기

## 1. Board 테이블에 BOARD_TYPE VARCHAR(10) 칼럼 추가 , Board.xml 쿼리 수정

```sql
ALTER TABLE t_board CHANGE COLUMN BOARD_SEQ BOARD_SEQ INT(11) NOT NULL AUTO_INCREMENT COMMENT '게시물번호' FIRST,
ADD COLUMN BOARD_TYPE CHAR(5) NOT NULL COMMENT '게시물 종류' AFTER BOARD_SEQ;
```

- 컬럼 속성 변경

  ALTER TABLE 테이블명 CHANGE COLUMN 기존컬럼 바꿀컬럼 데이터형 속성;

- COMMENT는 각 테이블이나 컬럼에 이게 무엇을 뜻하는지 설명하는 것

- FIRST : 테이블맨 앞에 추가

- AFTER : 뒤에 추가

## 2. BaseCodeLabelEnum , BoardType enum class 생성

```JAVA
package kr.co.jisung.mvc.domain;

public interface BaseCodeLabelEnum {
	/*
	 * 코드를 리턴
	 */
	String code();
	
	/*
	 * 라벨(코드명)을 리턴
	 */
	String label();
}

```

```java
package kr.co.jisung.mvc.domain;

public enum BoardType implements BaseCodeLabelEnum{
	NOTICE("공지사항"),
	FAQ("자주묻는질문"),
	INQUIRY("1:1문의")
	;
	private String code;
	private String label;
	
	/*
	 * name() : 열거 객체의 문자열 리턴
	 */
	private BoardType(String label) {
		this.code = name(); // NOTICE , FAQ , INQUIRY 가 들어감
		this.label = label; // 공지사항 ,자주묻는질문, 1:1문의 가 둘어감
	}
	@Override
	public String code() {
		return code;
	}

	@Override
	public String label() {
		return label;
	}

}

```

## 3. Board에 BoardType boardType 변수 추가

```java
package kr.co.jisung.mvc.domain;

import java.sql.Date;

import lombok.Data;

//getter , setter
@Data
public class Board {
	private int boardSeq;
	private BoardType boardType;
	private String title;
	private String contents;
	private Date regDate;
}

```

## 4. BaseCodeLabelEnumJsonSerializer 클래스 추가

> ## #참고
>
> 1. 실제 커스터마이징을 담당하는 customSerializer를 만든다 (JsonSerializer 상속)
> 2. customSerializer를 module에 추가한다.
> 3. module을 objectMapper에 등록한다.

```java
package kr.co.jisung.configuration;

import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import com.fasterxml.jackson.core.JsonGenerator;
import com.fasterxml.jackson.databind.JsonSerializer;
import com.fasterxml.jackson.databind.SerializerProvider;

import kr.co.jisung.mvc.domain.BaseCodeLabelEnum;

/*
 * jackson : 자바 객체를 json 형태로 변환해주는 여러 라이브러리
 * 자바의 객체를 json으로 변환하는 작업을 serialize(직렬화) 
 * json을 자바의 객체로 변환하는걸 deserialize(역직렬화)
 */
public class BaseCodeLabelEnumJsonSerializer extends JsonSerializer<BaseCodeLabelEnum>{

	@Override
	public void serialize(BaseCodeLabelEnum value, JsonGenerator jsonGenerator, SerializerProvider provider)
			throws IOException {
		Map<String, Object> map = new HashMap<String, Object>();
		map.put("code", value.code());
		map.put("label", value.label());
		jsonGenerator.writeObject(map); // { }을 만드는것과 동일
		
	}
	
}

```



## 5. WebConfiguration objectMapper ,  MappingJackson2JsonView Bean 등록

```java
	@Bean
	public ObjectMapper objectMapper() {
		ObjectMapper objectMapper = new ObjectMapper();
		SimpleModule simpleModule = new SimpleModule();
        //BaseCodeLaelEnum클래스는 BaseCodeLabelEnumJsonSerializer 로 Serialize하겠다
		simpleModule.addSerializer(BaseCodeLabelEnum.class, new BaseCodeLabelEnumJsonSerializer());
		objectMapper.registerModule(simpleModule);
		return objectMapper;
	}
	
	@Bean
	public MappingJackson2JsonView mappingJackson2JsonView() {
		MappingJackson2JsonView jsonView = new MappingJackson2JsonView();
		jsonView.setContentType(MediaType.APPLICATION_JSON_VALUE);
		jsonView.setObjectMapper(objectMapper());
		return jsonView;
	}
```

> ObjectMapper 은 서버 단에서 Object 형태로 변환을 도와주는 일종의 라이브러리이다.

> MappingJackson2JsonView는 모델에 저장된 모든 객체를 JSON 형식으로 변환해줍니다



## 6. Swagger에서 확인



