# 게시물 검색 기능 MyBatis if사용법 , COMMONS-LANG3

## commons.lang3 라이브러리 추가

```xml
		<!-- common-lang3 -->
		<dependency>
			<groupId>org.apache.commons</groupId>
			<artifactId>commons-lang3</artifactId>
		</dependency>
```

## Board.xml에서 Mybatis 동적쿼리 사용

```xml
		<select id="getList" parameterType="kr.co.jisung.mvc.parameter.BoardSearchParameter" resultType="kr.co.jisung.mvc.domain.Board">
		SELECT
			B.BOARD_SEQ,
			B.TITLE,
			B.CONTENTS,
			B.REG_DATE
		FROM T_BOARD B
		<!--Mybatis에서 제공하는 where문법  -->
		<where>
		<!-- @를 사용하면 java static method 접근 가능 -->
		<!-- @패키지 + 클래스명@메소드명(파라메터 변수명)  -->
		<!-- null과 공백문자이면 false 나머지 true-->
		<!-- 컨텐츠가 리턴되면 단순히 “WHERE”만을 추가한다. 게다가 컨텐츠가 “AND”나 “OR”로 시작한다면 그 “AND”나 “OR”를 지워버린다 -->
			<if test="@org.apache.commons.lang3.StringUtils@isNotEmpty(keyword)">
				AND B.TITLE LIKE CONCAT ('%' , #{keyword} , '%')
			</if>
		</where>
		ORDER BY B.REG_DATE DESC
	</select>
```

## 검색 파라미터로 사용할 BoardSearchParameter 생성

```java
package kr.co.jisung.mvc.parameter;

import kr.co.jisung.mvc.domain.Board;
import lombok.Data;

/**
 * 게시물검색
 * @author jisun
 *
 */
@Data
public class BoardSearchParameter {
	private String keyword;
	public BoardSearchParameter() {
		
	}
}
```

## Repositoy , Service , Controller에 적용

```java
List<Board> getList(BoardSearchParameter parameter);
```

```java
	public List<Board> getList(BoardSearchParameter parameter){
		return repository.getList(parameter);
	}
```

```java
	@GetMapping
	@ApiOperation(value = "목록 조회",notes = "목록 정보를 조회할 수 있습니다.")
	public BaseResponse<List<Board>> getList(BoardSearchParameter parameter){
		return new BaseResponse<List<Board>> (boardService.getList(parameter));
	}
```

