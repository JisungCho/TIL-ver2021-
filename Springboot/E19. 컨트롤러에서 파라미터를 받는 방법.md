# E19. 컨트롤러에서 파라미터를 받는 방법

```java
package kr.co.jisung.mvc.controller;

import java.util.HashMap;
import java.util.Map;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("/example/parameter")
public class ExampleParameterController {
	Logger logger = LoggerFactory.getLogger(getClass());
	
    // 스프링에서 파라미터로 선언만 해주면 스프링이 알아서 model을 만들어준다.
    
	/*
	 * @RequestParam으로 받기
	 */
	@GetMapping("/example1")
	public void example1(@RequestParam String id , @RequestParam String code,Model model) {
		model.addAttribute("id",id);
		model.addAttribute("code",code);
	}
	/*
	 * Map으로 받기
	 */
	@GetMapping("/example2")
	public void example2(@RequestParam Map<String, Object> paramMap,Model model) {
		model.addAttribute("paramMap",paramMap);
	}
	
	/*
	 * 클래스로 받기
	 * 클래스로 받을경우는 requestParam을 안해도됨
	 */
	@GetMapping("/example3")
	public void example3(ExampleParameter parameter,Model model) {
		model.addAttribute("parameter",parameter);
	}
	
	/*
	 * Pathvariable
	 * 
	 */
	@GetMapping("/example4/{id}/{code}")
	public String example4(@PathVariable String id,@PathVariable String code,Model model) {
		model.addAttribute("id",id);
		model.addAttribute("code",code);
		return "/example/parameter/example4";
	}
	
	/*
	 * String[] 배열을 받는 방법
	 */
	@GetMapping("/example5")
	public void example5(@RequestParam String[] ids,Model model) {
		model.addAttribute("ids",ids);
	}
	
	/*
	 * Json
	 */
	@GetMapping("/example6/form")
	public void form() {
	
	}
    
    /*
    	
    	@RequestBody : 
    	-Http 요청의 Body내용을 Java Object로 변환시켜주는 역할
    	-반드시 Post 요청과 함께 사용
    	-Json이나 XML과 같은 형태의 데이터를 Jackson 등의 MessageConverter를 활용하여 Java Object로 변환
    	
    	@RequestParam : 
    	요청 파라미터를 메소드에서 1:1로 받기 위해서 사용
    	
    	@ResponseBody :
    	자바 객체를 HTTP 응답 body로 전송할 수 있다.
    				
    */
    				
	
	/*
	 * Json / map으로 받기
	 */
	
	@PostMapping("/example6/saveData")
	@ResponseBody
	public Map<String, Object> example6(@RequestBody Map<String, Object> requestBody) {
		logger.info("requestBody : {} ",requestBody);
		Map<String, Object> resultMap = new HashMap<>();
		resultMap.put("result", true);
		return resultMap;
	}
	
	
	/*
	 * Json / 클래스로 받기
	 */
	
	@PostMapping("/example6/saveData")
	@ResponseBody
	public Map<String, Object> example6(@RequestBody ExampleRequestBodyUser requestBody) {
		logger.info("requestBody : {} ",requestBody);
		Map<String, Object> resultMap = new HashMap<>();
		resultMap.put("result", true);
		return resultMap;
	}
	
}

```

```java
package kr.co.jisung.mvc.controller;

import lombok.Data;

@Data
public class ExampleParameter {
	private String id;
	private String code;
}

```

```java
package kr.co.jisung.mvc.controller;

import lombok.Data;

@Data
public class ExampleUser {
	private String name;
	private int age;
	private String address;
}

```

```java
package kr.co.jisung.mvc.controller;

import lombok.Data;

@Data
public class ExampleRequestBodyUser {
	private ExampleUser user;
}

```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example1</title>
</head>
<body>
	<h2 style="text-align: center; margin-top: 100px;" >id : ${id}</h2>
	<h2 style="text-align: center; margin-top: 100px;" >code : ${code}</h2>
</body>
</html>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example2</title>
</head>
<body>
	<h2 style="text-align: center; margin-top: 100px;" >id : ${paramMap.id}</h2>
	<h2 style="text-align: center; margin-top: 100px;" >code : ${paramMap.code}</h2>
</body>
</html>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example3</title>
</head>
<body>
	<h2 style="text-align: center; margin-top: 100px;" >id : ${parameter.id}</h2>
	<h2 style="text-align: center; margin-top: 100px;" >code : ${parameter.code}</h2>
</body>
</html>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example4</title>
</head>
<body>
	<h2 style="text-align: center; margin-top: 100px;" >id : ${id}</h2>
	<h2 style="text-align: center; margin-top: 100px;" >code : ${code}</h2>
</body>
</html>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Example5</title>
</head>
<body>
	<h2 style="text-align: center; margin-top: 100px;" >ids : ${ids}</h2>
	<c:forEach var="id" items="${ids }">
		<p>${id }</p>
	</c:forEach>
</body>
</html>
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>form</title>
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
</head>
<body>
</body>
<script>
$(function(){
	var json = {
		user : {
			name : '홍길동',
			age: 14,
			address : "노원구"
			}
	};
				
	$.ajax({
		url : '/example/parameter/example6/saveData',
		type: 'post',
		data : JSON.stringify(json), //만든데이터를 jsonString으로 바꿔줌
		contentType : 'application/json', 
		dataType: 'json',
		success : function(data){
				console.log(data);
			}
	});
});
</script>
</html>
```

