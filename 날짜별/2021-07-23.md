# 2021-07-23

## 정보처리산업기사

### CA 7강 메이져 스테이트

#### CPU의 명령어 수행순서

- instruction fetch -> 디코딩 -> operland fetch -> execute

#### Major State 개념 : CPU의 4가지 동작(상태)

![4) 명령 실행과 제어 : 네이버 블로그](data:image/png;base64,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)

- Fetch : 기억장치에서 instruction을 읽어서 CPU로 가져옴 -> IR에 저장 -> 해독
- Indirect : 주소부가 간접주소인 경우 수행
- Execute : 해석한 명령을 실행하는 단계
- Interrupt : 인터럽트 발생시 복귀주소(PC) 를 저장시키고 , 제어순서를 인터럽트 처리 프로그램의 첫 번째 명령으로 옮기는 단계

#### Major State

| Fetch                                                        | Indirect                                                     |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| **MAR <- PC //명령어 주소<br />**MBR <- M(MAR) , PC <- PC+1 //명령어 주소로 MBR에 접근해 명령어 가져옴 , PC+1<br />IR <- MBR //가져온 명령어를 IR에 보냄 | MAR <- MBR //현재 가져온 값을 주소이기 때문에 다시 MAR에 보내줌<br />MBR <- M(MAR) //주소로 값을 메모리에 접근해서 값을 가져옴 |

- MAR <- PC : 명령을 수행하는 과정에서 가장 먼저 수행되어야 하는 마이크로 오퍼레이션

#### Interrupt

| 0    |                              |
| ---- | ---------------------------- |
| 1    |                              |
|      |                              |
| 99   | 명령어1                      |
| 100  | 명령어2 =====> 인터럽트 발생 |
| 101  | 명령어3                      |
|      |                              |

MBR <- PC , PC=0 // PC에는 101이 있으므로 MBR에 101을 넣어줌 , PC는 0으로 초기화

MAR <- PC , PC = PC +1 // MAR에 0을 넣어주고 , PC값은 하나증가해서 1로 만들어줌 , **메모리 0번지에 복귀주소 기억!**

M(MAR) <- MBR , IEN =0 // 101을 0번지에다가 넣어줌 , **IEN =0은 인터럽트 단계가 끝날 때 까지 다른 인터럽트가 발생하지 않도록함**

GOTO FETCH

#### ADD

MAR <- MBR

MBR <- M(MAR)

**AC < - AC + MBR**

#### AND

MAR < -MBR

MBR <- M(MAR)

AC < - AC AND MBR

#### LDA

MAR < -MBR

MBR <- M(MAR) , AC <- 0

AC <- AC + MBR

#### STA

MAR <- MBR

MBR <- AC

M(MAR) <- MBR

#### BUN

- 분기명령

PC <- MBR[AD]

#### ISZ

- 메모리 값을 읽어, 그 값을 1 증가

MAR <- MBR

MBR <- M(MAR)

MBR <- MBR + 1

M(MAR) <- MBR



### CA 8강 제어장치, 입출력장치, 인터럽트

#### 제어장치

- 제어 신호를 보내는 역활
- 제어신호
  - 중앙연산처리장치에서 마이크로 동작이 순서적으로 일어나게 하는 신호
- 제어데이터
  - 제어 장치가 제어신호를 발생시키기 위한 데이터 
    - **메이저 스테이트의 변천을 제어**
    - **중앙처리장치의 제어점을 제어**
    - **인스트럭션 수행 순서를 결정**
  - 수치 데이터는 제어 데이터가 될 수 없다.
- 제어 기억장치
  - ROM(Read only Memory)로 구성

#### 제어장치의 종류

- 하드 와이어드(고정 배선제어장치 , H/W)
  - 고속
  - 고가,
  - 명령어 변경 불가
  - 복잡
- 마이크로 프로그램(ROM , S/W)
  - 저속
  - 저가
  - 유연성
  - 마이크로 명령어
    - 수평 마이크로 명령
    - 수직 마이크로 명령
    - 나노 명령

#### 입출력 장치

- 구성(기능)
  - 입,출력 인터페이스
  - 입,출력 제어
  - 입,출력 버스
- 드루풋(처리율)  비율 : 폴링 < 인터럽트 < DMA < 채널

#### I/O 와 M/M 차이점

- 동작속도 M/M > I/O

#### 채널

- I/O 전용 프로세서 , 입,출력장치과 주기억장치를 연결하는 중개 역활
- 종류
  - 선택 채널 : 고속 입출력 장치 , 특정한 한개의 장치를 독점
  - 다중채널 : 저속 입출력 장치 , 동시에 여러 개의 입출력 제어
  - BLOCK 채널 : 선택 채널과 다중 채널을 결합

#### DMA

- CPU의 개입 없이 직접 정보 교환이 이루어 질 수 있는 방식

- Cycle Steal 

  - DMA 제어기가 한번에 한 데이터 워드를 전송하고 버스의 제어를 CPU에게 돌려주는 방법

- 입출력 전송에 따른 CPU의 부하를 감소

- 보다 빠른 데이터의 전송

- 인터럽트와 차이점

  | 인터럽트           | 사이클 스틸      |
  | ------------------ | ---------------- |
  | CPU 상태 보존 필요 | 상태 보존 불필요 |
  | CPU 수행 계속      | 대기 상태        |

#### 인터럽트

- 정의
  - 특수한 상태(예기치 않은 일, 응급상태)
  - 프로그램이 일시 중단되고 응급사태를 처리 후 다시 원래의 프로그램을 처리
- 인터럽트 요인이 받아들어 졌을 때 CPU가 확인하여야 할 사항
  - PC
  - 상태조건
  - 모든 레지스터 상태 확인
- 인터럽트 수행 후에 처리 할 사항
  - 인터럽트 처러시 보존시켰던 PC 복구
  - 제어상태 데이터 복구
- 인터럽트 체제의 기본 요소
  - 인터럽트 요청 신호
  - 인터럽트 취급 루틴
  - 인터럽트 처리 기능

#### 인터럽트 수행 순서

1. 인터럽트 요청 신호 발생
2. 현재 수행 중인 명령 완료 , 상태기억 (1.M/M 0번지 2. Stack M)
3. 인터럽트 판별
4. 인터럽트 처리
5. 복구 후 계속 처리

#### 내부 인터럽트

- 프로그램에 의한 인터럽트 = 트랩

#### 외부 인터럽트

- 정전(power fail) : 우선순의가 가장 높음
- timer 
- 입출력 인터럽트

#### 인터럽트가 아닌것

- 서브루틴
- 분기 명령

#### 그 외 인터럽트

- use bad command interrupt
- 페이지 폴트

#### 서브루틴

- 부프로그램(서브루틴) 과 매크로 공통점
  - 여러 번 중복되는 부분을 별도로 작성하여 사용
- 매크로
  - 어셈블리 언어로 프로그램을 작성할 때 반복되는 일련의 같은 연산을 효과적으로 하기위해 필요
- 리커션 프로그램
  - 한 루틴이 자기를 다시 부를때
- stack
  - 부 -> 주 프로그램으로 복귀할 때 필요한 주소

#### 우선순위 판별 방법

- S/W : 폴링
  - 요청신호 플래그를 차례로 검사
- H/W : 데이지 체인
  - 인터럽트의 우선순위에 따라 직렬로 연결
  - 장치번호 버스를 이용
  - 백터(분기할 곳의 정보를 제공)에 의한 인터럽트 처리 방법



## 코딩테스트

### 멘토,멘티 찾기

- 4중 for문

```java
package sec01;

import java.util.Scanner;

class Main {
	public static int solution(int n,int m , int[][] arr){
		int answer = 0;
		
		for(int i= 1;i<=n;i++) {
			for(int j=1;j<=n;j++) {
				int count = 0;
				for(int k=0;k<m;k++) {
					int pi=0;
					int pj=0;
					for(int s=0;s<n;s++) {
						if(arr[k][s] == i) {
							pi = s;
						}
						if(arr[k][s] == j) {
							pj = s;
						}
					}
					if(pi < pj) count++;
				}
				if(count == m) answer++;
			}
		}
		
		return answer;
	}

	public static void main(String[] args){
		Scanner kb = new Scanner(System.in);
		
		int n = kb.nextInt(); //학생수
		int m = kb.nextInt(); // 테스트
		
		int[][] arr = new int[m][n];
		
		for(int i=0;i<m;i++) {
			for(int j=0;j<n;j++) {
				arr[i][j] = kb.nextInt();
			}
		}
		
		System.out.println(solution(n,m,arr));
	}
}
```

## 스프링 - DI

- xml 에서 주입할 때 propery의 name 이 exam이면 setExam함수를 가리키는 것이다. setExam함수가 없다면 동작하지 않는다

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
	<!-- Exam exam = new NewlecExam(); -->
	<bean id="exam" class="spring.di.entity.NewlecExam"></bean>
	<!-- ExamConsole console = new InlineExamConsole(); -->
	<bean id="console" class="spring.di.ui.InlineExamConsole">
		<!-- console.setExam(exam); -->
		<!-- setter를 쓰는건데 set을 생략하고 작성,실제로는 set함수는 있어야함 -->
		<!--  name은 setExam -->
		<property name="exam" ref="exam"/>
	</bean>

</beans>

```

